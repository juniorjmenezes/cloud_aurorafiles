(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[37],{"13a4":function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-scroll-area",{staticClass:"full-height full-width"},[s("div",{staticClass:"q-pa-lg "},[s("div",{staticClass:"row q-mb-md"},[s("div",{directives:[{name:"t",rawName:"v-t",value:"S3FILESTORAGE.HEADING_SETTINGS_TAB",expression:"'S3FILESTORAGE.HEADING_SETTINGS_TAB'"}],staticClass:"col text-h5"})]),s("q-card",{staticClass:"card-edit-settings",attrs:{flat:"",bordered:""}},[s("q-card-section",[s("div",{staticClass:"row q-mb-md"},[s("div",{directives:[{name:"t",rawName:"v-t",value:"S3FILESTORAGE.LABEL_REGION",expression:"'S3FILESTORAGE.LABEL_REGION'"}],staticClass:"col-2 q-my-sm"}),s("div",{staticClass:"col-5"},[s("q-input",{attrs:{outlined:"",dense:"","bg-color":"white"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.save(e)}},model:{value:t.region,callback:function(e){t.region=e},expression:"region"}})],1)]),s("div",{staticClass:"row q-mb-md"},[s("div",{staticClass:"col-2 q-my-sm"}),s("div",{staticClass:"col-8"},[s("q-item-label",{attrs:{caption:""}},[t._v("\n              "+t._s(t.$t("S3FILESTORAGE.INFO_REGION"))+"\n            ")])],1)]),s("div",{staticClass:"row q-mb-md"},[s("div",{directives:[{name:"t",rawName:"v-t",value:"S3FILESTORAGE.LABEL_HOST",expression:"'S3FILESTORAGE.LABEL_HOST'"}],staticClass:"col-2 q-my-sm"}),s("div",{staticClass:"col-5"},[s("q-input",{attrs:{outlined:"",dense:"","bg-color":"white"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.save(e)}},model:{value:t.host,callback:function(e){t.host=e},expression:"host"}})],1)]),s("div",{staticClass:"row q-mb-md"},[s("div",{staticClass:"col-2 q-my-sm"}),s("div",{staticClass:"col-8"},[s("q-item-label",{attrs:{caption:""}},[t._v("\n              "+t._s(t.$t("S3FILESTORAGE.INFO_HOST"))+"\n            ")])],1)]),s("div",{staticClass:"row q-mb-xl"},[s("div",{staticClass:"col-2 q-my-sm"}),s("div",{staticClass:"col-5"},[s("q-btn",{staticClass:"q-px-sm",attrs:{unelevated:"","no-caps":"",dense:"",ripple:!1,color:"primary",label:t.$t("S3FILESTORAGE.BUTTON_TEST_CONNECTION")},on:{click:t.testConnection}})],1)])])],1),s("div",{staticClass:"q-pt-md text-right"},[s("q-btn",{staticClass:"q-px-sm",attrs:{unelevated:"","no-caps":"",dense:"",ripple:!1,color:"primary",label:t.$t("COREWEBCLIENT.ACTION_SAVE")},on:{click:t.save}})],1)],1),s("q-inner-loading",{staticStyle:{"justify-content":"flex-start"},attrs:{showing:t.loading||t.saving}},[s("q-linear-progress",{attrs:{query:""}})],1)],1)},a=[],i=s("4245"),o=s("21ac"),r=s("6bfe"),l=s("e539"),c={name:"S3FilestorageAdminSettingsPerTenant",data:function(){return{saving:!1,loading:!1,tenant:null,region:"",host:"",testingConnection:!1}},computed:{tenantId:function(){return this.$store.getters["tenants/getCurrentTenantId"]},allTenants:function(){return this.$store.getters["tenants/getTenants"]}},watch:{allTenants:function(){this.populate()}},beforeRouteLeave:function(t,e,s){this.doBeforeRouteLeave(t,e,s)},mounted:function(){this.loading=!1,this.saving=!1,this.populate()},methods:{hasChanges:function(){var t;if(this.loading)return!1;var e=r["a"].pObject(null===(t=this.tenant)||void 0===t?void 0:t.completeData);return this.region!==e["S3Filestorage::Region"]||this.host!==e["S3Filestorage::Host"]},revertChanges:function(){var t,e=r["a"].pObject(null===(t=this.tenant)||void 0===t?void 0:t.completeData);this.region=e["S3Filestorage::Region"],this.host=e["S3Filestorage::Host"]},populate:function(){var t=this.$store.getters["tenants/getTenant"](this.tenantId);t&&(void 0!==t.completeData["S3Filestorage::Region"]?(this.tenant=t,this.region=t.completeData["S3Filestorage::Region"],this.host=t.completeData["S3Filestorage::Host"]):this.getSettings())},save:function(){var t=this;if(!this.saving){this.saving=!0;var e={TenantId:this.tenantId,Region:this.region,Host:this.host};l["a"].sendRequest({moduleName:"S3Filestorage",methodName:"UpdateS3Settings",parameters:e}).then((function(s){if(t.saving=!1,s){var n={"S3Filestorage::Region":e.Region,"S3Filestorage::Host":e.Host};t.$store.commit("tenants/setTenantCompleteData",{id:t.tenantId,data:n}),o["a"].showReport(t.$t("COREWEBCLIENT.REPORT_SETTINGS_UPDATE_SUCCESS"))}else o["a"].showError(t.$t("COREWEBCLIENT.ERROR_SAVING_SETTINGS_FAILED"))}),(function(e){t.saving=!1,o["a"].showError(i["a"].getTextFromResponse(e,t.$t("COREWEBCLIENT.ERROR_SAVING_SETTINGS_FAILED")))}))}},getSettings:function(){var t=this;this.loading=!0;var e={TenantId:this.tenantId};l["a"].sendRequest({moduleName:"S3Filestorage",methodName:"GetSettings",parameters:e}).then((function(e){if(t.loading=!1,e){var s={"S3Filestorage::Region":r["a"].pString(e.Region),"S3Filestorage::Host":r["a"].pString(e.Host)};t.$store.commit("tenants/setTenantCompleteData",{id:t.tenantId,data:s})}}),(function(t){o["a"].showError(i["a"].getTextFromResponse(t))}))},testConnection:function(){var t=this;if(!this.testingConnection){this.testingConnection=!0;var e={Region:this.region,Host:this.host,TenantId:this.tenantId};l["a"].sendRequest({moduleName:"S3Filestorage",methodName:"TestConnection",parameters:e}).then((function(e){t.testingConnection=!1,!0===e?o["a"].showReport(t.$t("S3FILESTORAGE.REPORT_CONNECT_SUCCESSFUL")):o["a"].showError(t.$t("S3FILESTORAGE.ERROR_CONNECT_FAILED"))}),(function(e){t.testingConnection=!1,o["a"].showError(i["a"].getTextFromResponse(e,t.$t("S3FILESTORAGE.ERROR_CONNECT_FAILED")))}))}}}},d=c,g=s("2877"),E=s("4983"),u=s("f09f"),m=s("a370"),S=s("27f9"),h=s("0170"),v=s("9c40"),p=s("74f7"),C=s("6b1d"),T=s("eebe"),R=s.n(T),I=Object(g["a"])(d,n,a,!1,null,"100e66ff",null);e["default"]=I.exports;R()(I,"components",{QScrollArea:E["a"],QCard:u["a"],QCardSection:m["a"],QInput:S["a"],QItemLabel:h["a"],QBtn:v["a"],QInnerLoading:p["a"],QLinearProgress:C["a"]})}}]);